<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Multiprotocol (BLE + ZigBee)Demo Experience" />
<meta name="DC.relation" scheme="URI" content="GUID-4A40968E-8B6E-4C84-93B9-D31419BBBDA6.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Multiprotocol (BLE + ZigBee)Demo Experience</title>
<meta name="Microsoft.Help.Id" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147" />
<meta name="Microsoft.Help.TocParent" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-4A40968E-8B6E-4C84-93B9-D31419BBBDA6" />
<meta name="Microsoft.Help.TocOrder" content="4" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="Software Development Reference A 09/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147">
<h1 class="title topictitle1" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-9E481D4D-775B-4EF6-9190-5FB370B4CB26" style="">Multiprotocol (BLE + ZigBee)Demo Experience</h1><div class="body"><p class="p">The demo consists of the WBZ451 Curiosity board with the accompanying ble_zigbee_light_prov firmware, and the Microchip Bluetooth Data (MBD) Smartphone App. Users can provision the zigbee device over BLE, control and monitor the lights and temperature using either the BLE link or Zigbee link using the MBD app and Alexa App respectively. MBD app has the capability to scan for BLE advertisements from the WBZ451 module and to establish a connection. There are multiple sub apps in the Microchip Bluetooth Data App, for showcasing the provisioning and control/monitor capabilities over BLE.</p>
<p class="p">The BLE Scan operation helps monitor the following parameters before connection.</p>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-C8DF9F04-6272-47C3-9BE3-FF4DA1A76C36"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-DBBBF5E2-C0B5-4C43-BAC3-DB0BDBCB0A79"><span class="indent-level-default">1.</span><p class="p">Zigbee Device Name</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-3CDD6250-1B15-42FC-9E45-F258D94F6790"><span class="indent-level-default">2.</span><p class="p">Temperature Sensor</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A58AEA03-D39C-4763-8BDE-54873051AEDE"><span class="indent-level-default">3.</span><p class="p">RGB LED Status (on or off)</p>
</li>
</ol>
<p class="p">The BLE Connection operation helps monitor the following parameters</p>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-BA3E74CE-733A-47FA-A802-5DA58494FBC5"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-5B4CB778-68B7-4C40-A34C-1EF4332A9E97"><span class="indent-level-default">1.</span><p class="p">Zigbee Device Status</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-06342012-4F40-4E71-A51A-B1006DED6F30"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-FCC9FB27-62FD-490A-91DB-751CA5DB4062"><span class="indent-level-default">a.</span><p class="p">Device Type, Current Channel, Current MAC ID, Device State, SW Version, Device Name</p>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-1AD9D3B8-E962-46C4-AA8B-CBDE05628376"><span class="indent-level-default">2.</span><p class="p">Temperature Sensor</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-238B4699-B02B-461F-9EEE-A956597CE74C"><span class="indent-level-default">3.</span><p class="p">RGB LED Status (on or off)</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-E1033C40-3F36-43A5-8541-52A88548387D"><span class="indent-level-default">4.</span><p class="p">BLE Device Information Service</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-C8FB922A-CFF5-42AC-93CA-817084BA0E5F"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-58C9AF12-E824-4084-A858-FFCB9575DCEB"><span class="indent-level-default">a.</span><p class="p">Manufacturer Name, Model Number, Serial Number, Hardware Revision, Firmware Revision, Software Revision, System ID, Regular Certification Data List</p>
</li>
</ol>
</li>
</ol>
<p class="p">BLE Connection operation helps control the following parameters</p>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-DFB06223-9C6F-4123-88D9-BD7E48FB79B0"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-F542E746-C8DD-4DF0-AAC3-D9CB0CBE1752"><span class="indent-level-default">1.</span><p class="p">Zigbee Device Connection Params</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-9ED6B9C0-7810-4F5E-8888-EF08E6F5596A"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-8A79E0B1-FF1B-49F4-850C-60F9DF942052"><span class="indent-level-default">a.</span><p class="p">Current Channel, Device Name</p>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-32EC86AF-54FC-41BE-A2A5-DCF87CDBD4D0"><span class="indent-level-default">2.</span><p class="p">RGB LED Status (on or off), Controls the color and intensity of RGB LED when LED is “on”</p>
</li>
</ol>
<p class="p">When using an Amazon Echo as a Zigbee Coordinator, Alexa App helps control the following parameters</p>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-F2626FCC-F3E2-458C-A01E-BA7B18956CD9"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-E3850B80-B4F2-496A-869F-3ED9EE4762F3"><span class="indent-level-default">1.</span><p class="p">When the RGB LED is "on," it controls the color and intensity of the LED.</p>
</li>
</ol>
<p class="p">When using another WBZ451 Curiosity Board as a Zigbee Coordinator, UART commands can be used to control the following parameters</p>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-AA8E6C97-5756-473A-A298-D0DACA29B808"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-3CE6955F-79FB-49F2-BBF9-CE2786E2DA00"><span class="indent-level-default">1.</span><p class="p">RGB LED Status (on or off), Controls the color and intensity of RGB LED when LED is “on”</p>
</li>
</ol>
<p class="p">The multiprotocol demo experience starts with provisioning the Zigbee Device, then a successful zigbee connection, followed by the control/monitor of Lights over both the Zigbee and BLE links.</p>
<div class="section" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4496A449-4868-4ED6-A757-DD4814AF21F6"><h2 class="title sectiontitle">Multiprotocol Light Demo with Amazon Echo as Coordinator</h2></div>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-8B1D715B-2FB6-4D9A-A929-1EFE17ABA463"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-03FFC166-5411-4A0E-BC07-AD52C76A6E07"><span class="indent-level-default">1.</span><p class="p">Supply power to the WBZ451 Curiosity Board by connecting a USB cable to the kit (PC to WBZ451 Curiosity Board).</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-C42B4752-A848-4BC1-B27B-068DBBA864CD"><span class="indent-level-default">2.</span><p class="p">The Discovery of Zigbee Lights</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-86816319-85A1-4413-ACC0-0E7A47605F71"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-D7D796BE-C757-4F6A-8041-B4B509583C2C"><span class="indent-level-default">a.</span><p class="p">Voice Commands</p>
<ol class="ol" type="i" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-D9DB7F67-9231-4DA9-BEC9-59E2D4B6C3EC"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A0B7A548-6E8A-466A-A1A4-81D99182754B"><span class="indent-level-default">i.</span><p class="p">Ask Alexa to discover your device. Say “Discover my devices.”</p>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-EB17C1B9-86A6-4C41-B9B5-7F5F2E5E73B3"><span class="indent-level-default">b.</span><p class="p">Alexa App</p>
<ol class="ol" type="i" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A777E131-635C-4E2B-88A6-D284BB84E093"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-CAB78E29-980E-497E-90F4-D236C602D65A"><span class="indent-level-default">i.</span><p class="p">From the menu, select "Add Device."</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-7C94859F-D099-4FE4-BDBA-393E0110BF9F"><span class="indent-level-default">ii.</span><p class="p">Select the type of smart home device “Light” and select other.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-C9ABEF66-4D0D-4B8D-8EF9-7BC94CACFE9E"><span class="indent-level-default">iii.</span><p class="p">Initiate Discover Devices</p>
</li>
</ol>
</li>
</ol>
<div class="p"><strong class="ph b">Note:</strong> Echo/Alexa is in discovery mode for 45 secs. Devices (Lights/other) wanting to join Echo should initiate the joining/connecting procedure within this time limit for a successful join.<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-881DF9F4-D698-4628-B4C1-CAE128121C00"><div class="figcap"><span class="fig--title-label">Figure 1. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-A2C32F37-9765-496A-A158-AE055ABB0492-low.png" /></div>
</div>
</li>
</ol>
<div class="section" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-55D684D8-2D05-4721-9C8D-FF33ED7B4073"><h2 class="title sectiontitle">Provisioning - Connecting Zigbee Lights (Router) to Coordinator (Combined Interface/Amazon Echo)</h2></div>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-B1A8F836-311E-460F-8226-7E2EA4B66E40"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A4D4BAF9-F9BC-4AC3-A5B2-A48FF1FA04B7"><span class="indent-level-default">1.</span><p class="p">Issue Reset to factory new (Use either 1.a or 1.b)</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-1186A52E-F385-4F23-BFD9-8177B9EB8017"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-1753FBBE-CF92-4567-954B-1EE7C8CF72D4"><span class="indent-level-default">a.</span><p class="p">using button (SW2), press and hold SW2 button for 10 secs.</p>
<p class="p">Users can view the data logs for a better understanding of the demo experience. To view the logs -&gt; Open a terminal emulator like Teraterm with following settings (Speed: 115200, Data: 8-bit, Parity: none, stop bits: 1 bit, Flow control: none, LF+CR for tx and rx, echo enabled (Use of TeraTerm is not mandatory to experience the demo)</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A2FC1910-A9D5-4915-A947-4A317A5BCE13"><span class="indent-level-default">b.</span><p class="p">Open Microchip Bluetooth Data (MBD) App, select BLE Provisioning -&gt; Coming Soon-&gt; COMBO_LIGHT_9393 -&gt; Factory Reset</p>
<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-D4042691-B9B1-49AC-A43E-852665E2590B"><div class="figcap"><span class="fig--title-label">Figure 2. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-B6A56F4D-1EEF-4851-9C8C-627A34D21EC4-low.png" /></div>
<div class="p">The following message will be printed in the terminal window post a successful reset to factory new <div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-E22B94B2-AF5A-403C-8167-99BD4515D069"><div class="figcap"><span class="fig--title-label">Figure 3. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-A7BD6AFB-BC44-4F92-BC8D-3309D46221A4-low.png" /></div>
</div>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4CA3FE61-E692-427B-A5B7-DDBD9FE2A039"><span class="indent-level-default">2.</span><p class="p">To scan for nearby WBZ451 devices running the Multiprotocol demo, open Microchip Bluetooth Data (MBD) App, select “BLE Provisioning” and select the “Coming Soon” option</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-00198BDA-4415-4501-B05B-366D20E44C6C"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-7C1913E8-FB8C-48AF-9A7D-D7BCA51DD7C7"><span class="indent-level-default">a.</span><p class="p">Scan operation will find – COMBO_LIGHT_xxxx device in results, select this device</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4AA63B4C-F83A-4553-B11B-0881C953271A"><span class="indent-level-default">b.</span><div class="p">After selecting, the device status will be displayed, Users can now either change the device name or move ahead to provisioning the device keeping the device name as default<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-32443265-E02A-4172-A8D9-261D4027F517"><div class="figcap"><span class="fig--title-label">Figure 4. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-F98C96D4-67E1-46A9-8881-3AB9717FD857-low.png" /></div>
</div>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-82175191-98D5-47BC-B63C-A3AD7480B261"><span class="indent-level-default">c.</span><p class="p">Select the "Provision" option in the MBD App to configure channel map. Channel map needs to be chosen and select commission (In channel Map select all the channels before selecting commision unless user is aware of channel on which Echo is operating on). When the commission option is selected, the device begins to search for an existing zigbee network to join. When the device joins the existing network created by Amazon Echo, a 180-second finding and binding process begins.</p>
<p class="p"><strong class="ph b">Note:</strong> Echo device must be in discovery mode when selecting the commission option.</p>
<p class="p"></p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-882C4701-475F-444F-A4B2-BBAC1A6013A6"><span class="indent-level-default">d.</span><div class="p">Upon completion of 180 seconds, the Commissioning process is completed, Users can select "ok", Device State changes from “Not Commissioned” to “Commissioned”<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-65710AA7-9574-443D-8C0A-E0332A3D7AF8"><div class="figcap"><span class="fig--title-label">Figure 5. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-0DC8A9EC-A35A-4B37-A38A-7E50337885C0-low.png" /></div>
<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-AD923BF8-1644-4429-84D6-A585346EE3F3"><div class="figcap"><span class="fig--title-label">Figure 6. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-CE6CBC26-A259-4D8A-8CF1-8924F5DCAFEA-low.png" /></div>
</div>
</li>
</ol>
<p class="p"></p>
</li>
</ol>
<div class="section" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-AFACF072-C598-46F2-8AA7-1FF5CAA1E469"><h2 class="title sectiontitle">Multiprotocol Control/Monitor of Lights using BLE (MBD App)</h2></div>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-30908403-8658-45BA-ABEC-D16BE22B9D50"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-AD353017-502D-4333-95D8-ACBEDDFEC74B"><span class="indent-level-default">1.</span><p class="p">Monitor RGB LED state and Temperature</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-8F6CEE32-ACBE-440F-BE17-85100F60760B"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-F1C4A93C-BF91-4D13-AA9D-3BDC9F320DBC"><span class="indent-level-default">a.</span><p class="p">The WBZ451 Curiosity board begins in advertisement mode, allowing access to RGB LED on/off state and temperature sensor data and advertising its presence to a smartphone.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-6B834FD1-EFA1-42EB-BEBD-0D45106DEE4C"><span class="indent-level-default">b.</span><div class="p">Navigate through the Smartphone App as shown in the following Figure to access the advertisement information<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-975D634F-B0A6-4A1B-9FB5-74878C37AB34"><div class="figcap"><span class="fig--title-label">Figure 7. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-4DF0AF93-1EC5-4746-81DB-43549723EDB5-low.png" /></div>
</div>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-7CCF2186-E491-423C-ABBA-57EB46F39D3E"><span class="indent-level-default">2.</span><p class="p">Control RGB LED on/off status, as well as intensity and color.</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A7F5B39D-9212-421B-BD71-0E89BF1C2904"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A58DCF69-CEAA-42AF-9AB2-ADB11515F431"><span class="indent-level-default">a.</span><p class="p">Click the device that shows up after initiating a scan to establish a connection with the WBZ451 module</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-CAB5CCCC-057B-4497-AFBD-6A15A4276DB1"><span class="indent-level-default">b.</span><p class="p">The user programmable blue LED becomes solid once connection is established between the smartphone and WBZ451 module</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-36E1FCEE-A995-4502-B608-9816DCB39C79"><span class="indent-level-default">c.</span><p class="p"><img class="image" src="GUID-68FB5DF0-77D0-4B57-814D-9078425359D6-low.png" /> Controls the RGB LED state on/off.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2F9278CA-6C32-4240-A64E-986B2DF6697C"><span class="indent-level-default">d.</span><p class="p"><img class="image" src="GUID-78659129-3594-4935-8C59-62B177A7C725-low.png" /> Controls the color of RGB LED when LED is “on”.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-28D4E6C7-FBDC-475C-8EE3-1B2487A51E4A"><span class="indent-level-default">e.</span><p class="p"><img class="image" src="GUID-974985AB-21E4-4589-B962-386A8359F805-low.png" /> Controls the intensity of RGB LED when LED is “on”.</p>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-07334FBE-452E-4CD7-A0BC-CC2941282545"><span class="indent-level-default">3.</span><p class="p">The light status (on/off), light color and intensity chosen via the BLE link will be relayed on to Alexa App</p>
</li>
</ol>
<div class="section" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-7E80A4AE-72A4-4925-BA19-71D5C79C4D6B"><h2 class="title sectiontitle">Multiprotocol Control/Monitor of Lights using Zigbee (Alexa App)</h2></div>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2C27C8F4-EA40-419D-887B-2F3AC1952D7D"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-B4266A2B-AFB3-478F-946C-5CE7FF87B0F4"><span class="indent-level-default">1.</span><div class="p">Lights Getting Found and Connected to Echo <div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A4D7B9BF-6985-4AD8-80A0-EEC90C9BE1B7"><div class="figcap"><span class="fig--title-label">Figure 8. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-E1A1EFB1-FF89-4A4C-B87D-6AB143BF2166-low.png" /></div>
</div>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-5D5AF405-BC2D-4FDD-ACFA-11FC2C59A3EE"><span class="indent-level-default">2.</span><p class="p">Control the on/off status of RGB LEDs.</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-65819E60-7904-42BA-B78B-02E731FB8CC4"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-CBBEAAF0-BE00-4599-8F4B-6F3F0FFA6FB4"><span class="indent-level-default">a.</span><p class="p">Voice commands</p>
<ol class="ol" type="i" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-DF864919-DC31-405F-B63F-66F74DAC7B9C"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-9049AAFF-DA5F-47E7-B8D2-7B361BB877AD"><span class="indent-level-default">i.</span><p class="p">Ask Alexa, “Alexa, Turn on first light” to change status of RGB LED from off to on</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-BEAF5C7D-0F8D-4B02-80BB-AF04B5229202"><span class="indent-level-default">ii.</span><p class="p">Ask Alexa, “Alexa, Dim first light” to reduce the brightness.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-9267E93B-7248-4C30-A444-E9A8172569CF"><span class="indent-level-default">iii.</span><p class="p">Ask Alexa, “Alexa, Turn my first light green” to change the color.</p>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-E8F29F74-054C-4EA6-B4C2-78D2EA41BCB0"><span class="indent-level-default">b.</span><p class="p">Alexa App</p>
<ol class="ol" type="i" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2CB0E2FD-6160-4B54-8744-633A38DE55EA"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-AC4650EA-AD59-4111-926C-D5C77F028E14"><span class="indent-level-default">i.</span><p class="p">select First Light in “Lights” and control</p>
</li>
</ol>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-31D497BA-7DD0-44D1-A20D-829A8EED4BFC"><span class="indent-level-default">3.</span><div class="p">The Light Status (on/off), light color, and intensity chosen via the voice commands/Alexa App (Zigbee link) will be relayed on to the MBD App (BLE Sensor App)<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-FCE4C04C-6047-41CD-82A5-F1142E1291EF"><div class="figcap"><span class="fig--title-label">Figure 9. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-65990D18-1946-44BD-A726-4C08438D5C0D-low.png" /></div>
</div>
</li>
</ol>
<div class="section" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-E1D6AEAD-0888-431F-8ECC-EC78BE7A17FF"><h2 class="title sectiontitle">Setup: Multiprotocol Lights Demo with another WBZ451 Curiosity Board as Coordinator</h2></div>
<ol class="ol" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2E8BC7F9-4FAF-416A-B5E2-7F39F42F677C"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2B428DBD-ADBE-4EF4-8F2B-BAB8D095D3F7"><span class="indent-level-default">1.</span><p class="p"><a class="xref" href="GUID-3F360AE8-2799-450C-BE42-EABFBF27D5E9.html#GUID-3F360AE8-2799-450C-BE42-EABFBF27D5E9__GUID-288136C1-F5AF-4D0F-962C-F27BA4EE7976">Setup – Zigbee Coordinator (Combined Interface) - Network Creation and Steering</a></p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-84841382-FB5B-44DE-8BF8-94AE6696C0D5"><span class="indent-level-default">2.</span><p class="p"><a class="xref" href="#GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-FE8187A6-2AF7-4EF9-97D0-232C1735B3D1">BLE Provisioning - Lights to join the Zigbee network created by another WBZ451 Curiosity Board as Coordinator</a></p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-D706167D-26F6-46B3-AA90-0B7640689677"><span class="indent-level-default">3.</span><div class="p">After completing steps 1 and 2, lights can be controlled by MBD App over BLE or Zigbee Commands<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-6386C143-196A-4089-BAFD-69210243F4FA"><div class="figcap"><span class="fig--title-label">Figure 10. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-AF3B6315-5F44-4DA8-BDEF-148FE62A8A07-low.png" /></div>
</div>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-F30B076C-C28B-401C-93D6-64418DB8C6AB"><span class="indent-level-default">4.</span><div class="p">Turn on the light with the MBD App via the BLE link.<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4DF9E8C3-A27E-49EA-92CC-D6625A2ECE3E"><div class="figcap"><span class="fig--title-label">Figure 11. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-4DF0AF93-1EC5-4746-81DB-43549723EDB5-low.png" /></div>
<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-A85D94FE-92D4-4AF1-966D-5A1531AA8C01"><div class="figcap"><span class="fig--title-label">Figure 12. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-38FDD32F-7C5C-41DD-A673-FA4B1065A6C0-low.png" /></div>
</div>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2E8BC7F9-4FAF-416A-B5E2-7F39F42F677C"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4B45DD34-F397-4174-8ACC-1506BB225392"><span class="indent-level-default">a.</span><p class="p"><img class="image" src="GUID-68FB5DF0-77D0-4B57-814D-9078425359D6-low.png" />Turn on the RGB LEDs.</p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-FC6535F7-874A-4A3A-BB2C-B1A158806FA1"><span class="indent-level-default">b.</span><div class="p">The light status (on/off), light color, and intensity chosen via the MBD App (BLE link) will be relayed on to Multiprotocol lights (Zigbee link).<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-D7D76EDA-603C-44F9-A930-3E994C425DF1"><div class="figcap"><span class="fig--title-label">Figure 13. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-84A38B8B-9C09-4C49-AB0A-B06B68206D69-low.png" /></div>
</div>
</li>
</ol>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-BAE0C8D9-D986-4C07-80AA-9550BA21273C"><span class="indent-level-default">5.</span><p class="p">Turn off the light with the MBD App via the Zigbee link.</p>
<ol class="ol" type="a" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-2E8BC7F9-4FAF-416A-B5E2-7F39F42F677C"><li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-BD0EF6AA-AC1D-4643-89C1-113E1F241B12"><span class="indent-level-default">a.</span><p class="p">Off-Send the following command from the Coordinator device over UART ("0xf9e" is the router address and "0x23" is the zigbee endpoint of the zigbee light in control): <strong class="ph b">onOff -s 0xf93e 0x23 -off</strong></p>
</li>
<li class="li" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-4CEEF3C3-7FB6-4D09-9DCD-EA805AB9C601"><span class="indent-level-default">b.</span><div class="p">The light status (on/off), light color, and intensity chosen via the Zigbee Coordinator UART commands (Zigbee link) will be relayed on to the MBD App (BLE Sensor App).<div class="fig fignone" id="GUID-6AB1EDE7-A7E2-4798-8037-4C6D797DA147__GUID-64F82D0F-EA4C-4B30-930E-742A78349B77"><div class="figcap"><span class="fig--title-label">Figure 14. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-7509FA72-1542-47BD-88C6-7A4052D563D4-low.png" /></div>
</div>
</li>
</ol>
</li>
</ol>
<p class="p"></p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-4A40968E-8B6E-4C84-93B9-D31419BBBDA6.html" title="This section covers evaluation board features and running the preprogrammed demo example">Getting Started with WBZ451 Curiosity Board</a></div>
</div>
</div></body>
</html>