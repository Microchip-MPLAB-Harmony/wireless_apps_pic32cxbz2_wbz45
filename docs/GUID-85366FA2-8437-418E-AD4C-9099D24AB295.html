<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Zigbee OTAU Firmware Architecture" />
<meta name="DC.relation" scheme="URI" content="GUID-FC914BE3-2FDF-44C2-9611-A500FBF9A3A6.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-85366FA2-8437-418E-AD4C-9099D24AB295" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Zigbee OTAU Firmware Architecture</title>
<meta name="Microsoft.Help.Id" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-85366FA2-8437-418E-AD4C-9099D24AB295" />
<meta name="Microsoft.Help.TocParent" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-FC914BE3-2FDF-44C2-9611-A500FBF9A3A6" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="Software Development Reference A 09/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-85366FA2-8437-418E-AD4C-9099D24AB295"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295">
<h1 class="title topictitle1" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-CF3777F2-32DE-423D-A43A-CBA02D67D71D" style="">Zigbee OTAU Firmware Architecture</h1><div class="body"><p class="shortdesc"></p>
<p class="p">ZigBee Over-the-Air Upgrade (OTAU) relies on existing ZigBee services for service discovery and data transmission across the network. The main components of the architecture are:</p>
<ul class="ul"><li class="li" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-4AC91F46-6C35-475D-9AD7-19FF7987C6F6"><p class="p">The OTAU client, which resides on one of the end points on every upgradeable device .</p>
</li>
<li class="li" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-A1C28755-05CF-4A9F-AF7A-0D58C4833CBB"><p class="p">The OTAU server, which resides on whichever devices initiates the upgrade process</p>
</li>
<li class="li" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-B59B7F4B-3202-4F19-AAE2-5122DF1CA482"><p class="p">A NVM driver responsible for writing the transferred images to embedded flash Slot1 on every upgradeable device</p>
</li>
<li class="li" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-FF5CF1AB-B245-4082-BAEE-DCEA9150E740"><p class="p">An OTAU-capable bootloader for copying firmware image from Slot1 to Slot0 and does the image authentication.</p>
</li>
</ul>
<div class="section" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-42FAF18D-C135-400C-89BF-37D25AC0A4B3"><h2 class="title sectiontitle"><strong class="ph b">Client Side Architecture</strong></h2></div>
<p class="p">The high-level software architecture of the OTAU client side (that is, the upgradeable device) is illustrated in the below Figure. According to the Zigbee OTAU specification, the OTAU client part of the architecture is realized as a client side of the OTAU cluster. This implies that the ZigBee Cluster Library (ZCL) framework must be present whenever OTAU is to be enabled on a device.</p>
<div class="p"><div class="fig fignone" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-441CE9C4-12F6-438B-BBC1-B23502F58FD3"><div class="figcap"><span class="fig--title-label">Figure 1. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-C18A299D-AD43-4574-8F90-B1ECD9D6564E-low.png" /></div>
</div>
<div class="section" id="GUID-85366FA2-8437-418E-AD4C-9099D24AB295__GUID-1653D825-D965-4197-916D-9AC86B9833FD"><h2 class="title sectiontitle"><strong class="ph b">Server Side Architecture</strong></h2></div>
<p class="p">The server side of the OTAU cluster resides on what is commonly referred to as the upgrade access point (UAP). This may be a dedicated physical device which implements the server-side cluster or a multi-function in-network device which implements the OTAU service as an add-on piece of functionality. Regardless of how UAP is realized, there is always an implicit back channel, usually in the form of another network or serial connection outside of the ZigBee network, which is used to transfer the firmware images and control commands to the UAP. This guide considers an application scenario where an in- network device is used as a permanent access point on the network through which over-the-air upgrades can be initiated at some point in a network’s lifetime. In such case, UAP is a device joined to the network and supporting the server side of the OTAU cluster in addition to functionality of a common network device. In order to start and control upgrade process an in-network UAP is connected serially to a PC, and the OTA PC tool or a similar custom utility is used.</p>
<p class="p"></p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-FC914BE3-2FDF-44C2-9611-A500FBF9A3A6.html">Device Firmware Upgrade Over Zigbee Link</a></div>
</div>
</div></body>
</html>