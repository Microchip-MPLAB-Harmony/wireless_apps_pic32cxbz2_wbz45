<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Zigbee Application Demo: Light control and Monitoring using Combined Interface" />
<meta name="DC.relation" scheme="URI" content="GUID-ACC1C69A-65C7-45E5-94FD-81BF5B29E381.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Zigbee Application Demo: Light control and Monitoring using Combined Interface</title>
<meta name="Microsoft.Help.Id" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD" />
<meta name="Microsoft.Help.TocParent" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-ACC1C69A-65C7-45E5-94FD-81BF5B29E381" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="Software Development Reference A 09/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD">

    <h1 class="title topictitle1" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-7F5F41D2-1B76-4E7D-97DC-C326F44CDA9A" style="">Zigbee Application Demo: Light control and Monitoring using Combined Interface</h1>
    <div class="body"><div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__WBZ451-CURIOSITY-BOARD"><h2 class="title sectiontitle"><span class="ph">WBZ451</span>
                Curiosity Board</h2>
        
        
            <p class="p">Devices (Device): | <span class="ph">PIC32CX1012BZ25048</span>(MCU) on <span class="ph">WBZ451</span> module |</p>

            <p class="p">Peripherals (Used, On-Board): | <strong class="ph b">RGB LED</strong> | <strong class="ph b">User Button</strong>| <strong class="ph b">UART-USB
                    Converter</strong>|</p>

        
    </div>
<div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__INTRODUCTION"><h2 class="title sectiontitle">Introduction</h2>
            
            <p class="p">This page describes the demo steps for Light control and Monitoring using Combined
                Interface on <span class="ph">WBZ451</span> Curiosity boards.</p>
<p class="p">An overview of
                the demo is shown below.</p>
<img class="image" src="GUID-0613461D-90E0-4A49-BD0A-263EC79AA4C8-low.jpg" />
        </div>
<div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__PREREQUISITES-"><h2 class="title sectiontitle">Hardware Required</h2>
            
            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-8997D50B-B6B9-432C-BB39-63BEEE5F901B" class="table" frame="border" border="1" rules="all">
                    <col style="width:" />
                    <col style="width:" />
                    <thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e74"><span>
                                <strong class="ph b">Tool</strong>
                            </span></th>

                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e80"><span>
                                <strong class="ph b">Qty</strong>
                            </span></th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e74 "><span><span class="ph">WBZ451</span> Curiosity Boards</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e80 "><span>2</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e74 "><span>Micro USB cable</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e80 "><span>2</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e74 "><span>Personal Computer</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e80 "><span>1</span></td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

        
        <div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__SDK-SETUP"><h2 class="title sectiontitle">SDK
                Setup</h2><a class="xref" href="GUID-2AD37FE2-1915-4E34-9A05-79E3810726D7.html" title="Steps to install IDE, compiler, tool chain, BLE, Zigbee stacks and application examples on your PC">Gettting Started with Software Development</a></div>

        <div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__SOFTWARE"><h2 class="title sectiontitle">Software</h2>
            <a class="xref" href="https://ttssh2.osdn.jp/index.html.en" target="_blank">TeraTerm</a></div>

        <div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-476D9648-8FFD-4234-BA75-D7625FED5385"><h2 class="title sectiontitle">Programming the precompiled hex
                file or Application Example</h2>
            
            <p class="p">To run the demo , we need 2 devices. One is the Combined Interface and the other is
                extended color light.</p>

            <ol class="ol" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__OL_EKQ_XWH_M5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-F9762EF1-13F7-48EF-92D3-8223EBD65C70"><span class="indent-level-default">1.</span>
                    <p class="p">One of the <span class="ph">WBZ451</span>Curiosity board is programmed with
                        Combined Interface which can act as Zigbee Gateway/Coordinator. Program the
                        CI pre-compiled hex image by following <a class="xref" href="GUID-07AD46F8-182D-4FBA-AA80-D58BEEDC78AB.html">steps</a> on one curiosity board.</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-51A7C49F-3BBA-4470-8646-2AB2D74D5703"><span class="indent-level-default">2.</span>
                    <p class="p">Another <span class="ph">WBZ451</span> Curiosity board is programmed with
                        Extended Lights application which can act as Zigbee Router. Follow the below
                        step for programming  Extended Lights application  on another curiosity
                        board.</p>

                </li>

            </ol>

            <p class="p"><strong class="ph b">Programming the hex file using MPLABX IPE</strong></p>

            <ol class="ol" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-86DFBE12-A651-42BA-B28A-3BBE8A45957A">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-615EAAB4-CA37-48DC-B8D6-A517E037C6B2"><span class="indent-level-default">1.</span>
                    <p class="p">Precompiled Hex file is located in "<span class="ph">&lt;Harmony Content
        Path&gt;\wireless_apps_pic32cxbz2_wbz45</span>\apps\zigbee\ext_light"
                        folder</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-32A5BDB1-E7AC-43F3-8DE0-1C2A0C6B2BA4"><span class="indent-level-default">2.</span>
                    <p class="p">Follow the steps mentioned <a class="xref" href="https://microchipdeveloper.com/ipe:programming-device" target="_blank">here</a></p>

                </li>

            </ol>

            <p class="p"><strong class="ph b">Caution:</strong> Users should choose the correct Device and Tool information</p>

            <p class="p"><strong class="ph b">Programming the Application using MPLABX IDE</strong></p>

            <ol class="ol" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-38E32D75-4A7E-4FCA-AB19-EAC72582B498">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-33A1AC6E-81BD-4873-9C21-CC3BF516AAC9"><span class="indent-level-default">1.</span>
                    <p class="p">Follow steps mentioned in of <a class="xref" href="GUID-EA74172C-595E-4A34-B359-D42EE443F0EC.html" title="Here is how to open, build and program an existing application example">Running a Precompiled Example</a> document</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-87FDAD2C-721F-4193-A9F9-C5DFD00D8841"><span class="indent-level-default">2.</span>
                    <p class="p">Open and program the Application Example "ext_light.x" located in "<span class="ph">&lt;Harmony Content
        Path&gt;\wireless_apps_pic32cxbz2_wbz45</span>\apps\zigbee\ext_light\firmware"
                        using MPLABX IDE</p>

                </li>

            </ol>

            <p class="p"><dfn class="term">&lt;Harmony Content Path&gt;</dfn>
                <a class="xref" href="GUID-A55E9342-CE44-4A91-86BB-FEC6706FCD1C.html#GUID-A55E9342-CE44-4A91-86BB-FEC6706FCD1C__GUID-C6B23D06-5DF8-4D73-B997-AC22020FE9D3">how to find what is my Harmony Content Path</a></p>

        </div>
<div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__DEMO-DESCRIPTION"><h2 class="title sectiontitle">Demo Description</h2>
        
        
            <p class="p">The demo applications demonstrates the Zigbee protocol functionality of PIC32CXBZ/WBZ
                family of devices and modules. It consists of a ZigBee 3.0 Coordinator and Router
                implemented as shown below :</p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-79B319CA-DAD3-4902-906A-D189A2B11D79" class="table" frame="border" border="1" rules="all">
                    <col style="width:" />
                    <col style="width:" />
                    <col style="width:" />
                    <thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e264"><span>
                                <strong class="ph b">Application</strong>
                            </span></th>

                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e270"><span>
                                <strong class="ph b">Zigbee Logical Device Type</strong>
                            </span></th>

                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e276"><span>
                                <strong class="ph b">Functionality</strong>
                            </span></th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e264 "><span>Combined Interface</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e270 "><span>Coordinator</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e276 "><span>Device capable of controlling and monitoring other devices. It is
                                typically a mains-powered device like a personal computer</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e264 "><span>Extended Lights</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e270 "><span>Router</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e276 "><span>Is a lighting device that can be switched on/off , brightness
                                &amp; color of the light can be adjusted via the color
                                commands.</span></td>

                        </tr>

                    </tbody>

                </table>
</div>

        
        
            <p class="p"><strong class="ph b">Zigbee device commissioning:</strong></p>

            
                <ul class="ul">
                    <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-863F7F11-580D-41AD-B29E-FABF6391EFF5">
                        <p class="p">The Zigbee router i.e. Extended Lights can be commissioned and brought to
                            the existing zigbee network formed by Zigbee coordinator i.e. Combined
                            Interface or can create new zigbee Distributed network (if there is no
                            nearby network).</p>

                    </li>

                </ul>

            
        
        
            <p class="p"><strong class="ph b">Zigbee Light control:</strong></p>

            
                <ul class="ul">
                    <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-969F5A1E-F52A-4087-8E47-B9C2BCF46D60">
                        <p class="p">Extended light RGB LED can be controlled from Zigbee Gateway of the same
                            network.</p>

                    </li>

                    <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-4D1E5F41-9091-4867-AF6A-EE7E4BC69216">
                        <p class="p">When the light status is changed the light change report will be sent to
                            zigbee gateway through Zigbee communication.</p>

                    </li>

                </ul>

                 
            
        
    </div>
<div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__DEMO-STEPS"><h2 class="title sectiontitle">Demo
                Steps:</h2><p class="p">The Zigbee light can be connected to any zigbee
                    network.</p>
<p class="p"><strong class="ph b">Joining Light with <span class="ph">WBZ451</span> Combined
                    Interface (CI) Coordinator</strong></p>
<div class="sectiondiv"><strong class="ph b"> Hardware &amp; Software
                    Setup</strong></div><ol class="ol" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__OL_PLT_FRQ_L5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-502E31C8-072F-4C53-AE36-8EC1F3928758"><span class="indent-level-default">1.</span>Supply power to <span class="ph">WBZ451</span> Curiosity Board consisting of Combined
                    Interface application by connecting a USB cable. Power Supply (PS) Green LED
                    will turn on when connect to PC. <br /><img class="image" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__IMAGE_QYP_SM4_45B" src="GUID-82216D6D-AD47-4BAF-A941-0437090A2761-low.jpg" /><br /></li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-E4EFE9A1-9C1B-42D0-A076-7656CAE9B40E"><span class="indent-level-default">2.</span>The application activity is shown
                    as "Console Log" through on board UART-USB converter </li>

            </ol>
<ul class="ul" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__UL_QJH_CQQ_L5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-EA50E248-E3FB-4ADE-B3C4-03FC1904B80E">
                    <p class="p">Open Terminal(eg: Tera Term) with the setup as shown below to look for these
                        logs</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-A312A980-64F6-451A-BA6C-125CA2AE26BD">
                    <p class="p">On the PC side virtual COM port connection that corresponds to the board
                        shall have following settings: </p>

                    <pre class="pre codeblock" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__CODEBLOCK_PZ4_JCX_L5B"><code id="d108340e385" content="BAUD RATE: 115200 (as configured in SERCOM configuration)&#xA;PARITY: None&#xA;DATA BITS: 8&#xA;STOP BITS: 1&#xA;FLOW CONTROL: None">BAUD RATE: 115200 (as configured in SERCOM configuration)
PARITY: None
DATA BITS: 8
STOP BITS: 1
FLOW CONTROL: None</code></pre>
                </li>

            </ul>
 Additionally, local echo and sending line ends with line feeds shall be enabled in
            the PC serial terminal application. <br /><img class="image" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__IMAGE_SJH_CQQ_L5B" src="GUID-D0FB03A7-B0B8-4889-B1EB-11B00323BD2A-low.png" /><br /><p class="p"><strong class="ph b"> Network Formation (Coordinator - (Combined
                Interface))</strong></p>
Follow the steps explained in <a class="xref" href="GUID-07AD46F8-182D-4FBA-AA80-D58BEEDC78AB.html">Network Formation (Coordinator - (Combined Interface))</a> to open up the network in
                    CI.<p class="p"><strong class="ph b">Commissioning (Router - Extended Light)</strong></p>
The Extended Lights can
            be connected to any zigbee gateway (Combined interface running on  <span class="ph">WBZ451</span> Curiosity Board in the previous step).<ul class="ul" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__UL_A2L_FNW_R5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-65A51F57-729C-4BAF-A8B7-FD391BA0C274">
                    <p class="p">Supply power to another <span class="ph">WBZ451</span> Curiosity Board
                        programmed with "Extended Light" by connecting a USB cable. Power Supply
                        (PS) Green LED will turn on when connect to PC.</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-9569F02B-CDEE-440A-AF5B-748F9A76A5DB">
                    <p class="p">Follow step 2 in "Hardware &amp; Software Setup" for UART terminal Setup.
                    </p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-536011E4-F53E-42D9-B794-EA95171EE878">
                    <p class="p">Input command : <em class="ph i">resetToFN</em> and look for the below logs for successful
                        joining with CI.</p>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-13BAA23F-990B-4031-9541-2C5DB4978CE7">
                    <div class="p"><em class="ph i">Success logs</em> : When extended light successfully commissioned with
                        Combined Interface below log will be seen. <br /><img class="image" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__IMAGE_K4M_ZCM_M5B" src="GUID-6BD6D4BF-56B9-455C-80DB-E977779699C8-low.jpg" /><br /></div>

                </li>

            </ul>
<p class="p"><strong class="ph b">Light Control</strong></p>
RGB LED on <span class="ph">WBZ451</span>curiosity
            board is tied with Zigbee functionality. The LED color and brightness can be changed
            through Zigbee network .<ul class="ul" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__UL_YNW_B2M_M5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-2394E677-95E1-4E21-9340-BFB49E271B82">The RGB color can be controlled
                    from Combined Interface through console commands.</li>

            </ul>
<ul class="ul" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__UL_EFR_12M_M5B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-ED226BF7-0EE9-47FF-AAE7-C0E6F5F6CFBF">RGB color is changed from
                    Combined Interface, will be reflected in next received light attribute report in
                    combined Interface</li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-DC75C719-C475-49F4-8DCA-5AED267F4DB9">The network address of the light
                    is needed to send light control commands to light.</li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-3787D653-AC8B-4CE6-B921-4B933DE48643">This network address can be got
                    from Combined interface console log while commissioning was done. Refer to the
                    above success log for light network address. </li>

            </ul>
<img class="image" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__IMAGE_KF5_GDM_M5B" src="GUID-A3368AE6-148C-4269-8485-B918DF275B71-low.jpg" /><ul class="ul" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-1D808607-A3B5-4A37-B669-22978782514B">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-C00D7DC8-9E8A-4DA1-BFCD-36FD70D65A24">Another way to get the network
                    address from light is executing the below command in light side.
                    <pre class="pre codeblock" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__CODEBLOCK_ATX_22M_M5B"><code id="d108340e471" content=" Command: getNetworkAddress &#xA; Response: f088 "> Command: getNetworkAddress 
 Response: f088 </code></pre></li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-64E08E8A-3EE8-4C18-B7F8-19A88FA98F51">
                    <p class="p">The table below shows few commands for light control(on /off, brightness, hue
                        &amp; saturation). Refer to doc Serial Console Commands to get to know the
                        different parameters of the commands.</p>

                </li>

            </ul>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-631432CE-5734-46A0-AA67-BF0825CE7FF2" class="table" frame="border" border="1" rules="all">
                    <col style="width:" />
                    <col style="width:" />
                    <col style="width:" />
                    <thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e494"><span>Command Type</span></th>

                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e497"><span>Commands</span></th>

                            <th class="entry cellrowborder" style="vertical-align:middle;" id="d108340e500"><span>Parameter Details</span></th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e494 "><span>RGB LED ON</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e497 "><span>onOff 0x0 0xf088 0x23 -on</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e500 "><span>0x23 zigbee end-point number used for Light</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e494 "><span>RGB LED OFF</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e497 "><span>onOff 0x0 0xf088 0x23 -off</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e500 "><span>0x23 zigbee end-point number used for Light</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e494 "><span>RGB LED brightness change</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e497 "><span>moveToLevel 0x0 0xf088 0x23 0x45 0x0 0x1 0x0 0x0</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e500 "><span>0x45 is the configurable brightness value</span></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e494 "><span>RGB LED color change</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e497 "><span>moveToHueAndSaturation 0x0 0xf088 0x23 0x45 0x67 0x0 0x0
                                0x0</span></td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d108340e500 "><span>0x45 and 0x67 are the configurable Hue and Saturation
                                values</span></td>

                        </tr>

                    </tbody>

                </table>
</div>
<strong class="ph b">Other Functionalities</strong><ol class="ol" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-2AF404C3-8A3A-41C4-82DD-8CC05755ED39">
                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-6502B944-E92B-414F-9F02-E1579EB3EFA4"><span class="indent-level-default">1.</span>
                    <p class="p">On board button actions:</p>

                    <ul class="ul">
                        <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-59CF4077-C644-41DD-BFCF-EADA7EE5AFF2">
                            <p class="p">When the on board "User Button (<span class="ph">SW2</span>)"
                                is pressed for more than 10sec, it can delete all the networking
                                information and will bring the device to factory default state. This
                                functionality is available in both combined interface and light
                                devices.</p>

                        </li>

                    </ul>

                </li>

                <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-7F028B93-BF26-42B1-A835-10AB52AD356B"><span class="indent-level-default">2.</span>
                    <p class="p">Persistent Data Storage (PDS): The RGB light status (On/Off) and brightness
                        values are stored in non-volatile memory called PDS. So, power off/on of
                        extended light, these values persist and RGB LED will reflect accordingly.
                        This PDS storage is tied to zigbee network.</p>

                    <ul class="ul">
                        <li class="li" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__GUID-7BF2802A-C15E-45B1-9E6C-249743E44877">
                            <p class="p">The light On/Off status, colour and light brightness is being stored
                                in non-volatile memory in this case. So, power off/on, the LED will
                                be updated with light on/off, color and brightness values retrieved
                                from previous transaction.</p>

                        </li>

                    </ul>

                </li>

            </ol>
</div>
<div class="section" id="GUID-F5F71ECD-98A9-49B0-8147-68A25191BEAD__CREATING-APPLICATION-DEVICE-TYPES-FROM-SCRATCH-USING-MCC"><h2 class="title sectiontitle">Creating Application Device Types From Scratch Using MCC</h2>
        
        
            <p class="p">All the supported device types including this Extended Colour light projects can be
                generated by following the steps in <a class="xref" href="GUID-B70D4611-9448-4ACC-99C6-308B8EC2BEB7.html" title="There are different zigbee device types supported in Microchip Zigbee framework. Few sample application projects are available as reference &lt;Harmony Content Path&gt;\wireless_apps_pic32cxbz2_wbz45\apps\zigbee . The projects for other device types can be generated by following the step by step procedure in this document.">Generating project from MCC</a>.</p>

        
    </div>
</div>

    
    
    
    
    
    
    
    
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-ACC1C69A-65C7-45E5-94FD-81BF5B29E381.html" title="Documentation describing steps to test and develop the precompiled Zigbee application examples.">ZigBee Applications</a></div>
</div>
</div></body>
</html>