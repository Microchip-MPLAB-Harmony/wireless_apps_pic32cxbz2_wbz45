<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="USART with Peripheral Pin Select (PPS)" />
<meta name="Description" content="The Peripheral Pin Select (PPS) feature allows digital signals to be moved from their default pin location to another location. To enable a digital peripheral’s input and/or output signals, the appropriate PPS registers must be configured.This can be extremely handy for routing circuit boards. There are cases where a change of I/O position can make a circuit board easier to route. Sometimes mistakes are found too late to fix so having the option to change a pinout mapping in software rather than creating a new printed circuit board can be very helpful." />
<meta name="DC.relation" scheme="URI" content="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>USART with Peripheral Pin Select (PPS)</title>
<meta name="Microsoft.Help.Id" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8" />
<meta name="Microsoft.Help.TocParent" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="Software Development Reference A 09/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8">
<h1 class="title topictitle1" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-B5E8B83A-57D1-467B-8669-676697720143" style="">USART with Peripheral Pin Select (PPS)</h1><div class="body"><p class="shortdesc">The Peripheral Pin Select (PPS) feature allows digital signals to be moved from their default pin location to another location. To enable a digital peripheral’s input and/or output signals, the appropriate PPS registers must be configured.This can be extremely handy for routing circuit boards. There are cases where a change of I/O position can make a circuit board easier to route. Sometimes mistakes are found too late to fix so having the option to change a pinout mapping in software rather than creating a new printed circuit board can be very helpful.</p>
<p class="p">PPS block diagnram and various pin selection tables are explained in PIC32CX-BZ2 and WBZ45 Datasheet (D<strong class="ph b">S70005504A</strong>) chapter 6.</p>
<div class="section" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-50859A5C-51F3-4B08-A2BA-A9A7A7CD9805"><p class="p"><strong class="ph b">SERCOM0 USART with PPS</strong></p>
<p class="p">1. Create a new project and add SERCOM0 device resource as explained in <a class="xref" href="GUID-D79D28FC-6693-4FE3-B380-9F6983BCE151.html" title="Direct Mode is a mode in which peripherals are running based on function priority for pins and not using Peripheral Pin Selection(PPS).">USART with Direct Pin Enable</a> mode.</p>
<p class="p">2. Find SERCOM0 Pin description from evaluation kit user’s guide (<strong class="ph b">DS50003367A</strong>).</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-5972E604-82C3-43C0-A549-17361C328D07"><div class="figcap"><span class="fig--title-label">Figure 1. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-F1BCF85A-C064-4E5E-8979-BF4CE3817D56-low.jpg" /></div>
</div>
<p class="p">3. Assign a new pin for SERCOM0_PAD0, SERCOM0_PAD1, SERCOM0_PAD2, SERCOM0_PAD3 from PPS input/output group tables mentioned in datasheet(<strong class="ph b">DS70005504A)</strong>.</p>
<p class="p">As per below table, SERCOM0_PAD1 input pin can be mapped to any of the given RPn listed on this table. Similar tables are present in Datasheet for SERCOM0_PAD1, SERCOM0_PAD2, SERCOM0_PAD3 also.</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-A2E16871-5C42-482C-93AE-280F196AADC4"><div class="figcap"><span class="fig--title-label">Figure 2. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-3D5E2EC3-4DFA-42DF-818C-1F60CF558C36-low.jpg" /></div>
</div>
<p class="p">4. Open Pin settings from Window-&gt;MPlab Code configuratior v5-&gt;Harmony-&gt;Pin Configuration tab and select your desired pin functions.</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-C8DAB298-4D47-4687-8E26-5A224A64CB5D"><div class="figcap"><span class="fig--title-label">Figure 3. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-675DC9B3-B49A-4574-9CCD-E10C9A588A68-low.jpg" /></div>
</div>
<p class="p">5. Open your project graph from MCC code configurator and go to system configuration options and select SERCOM0 in "PPS" mode.</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-44B51958-290C-4C84-AFE7-13E15E9F432E"><div class="figcap"><span class="fig--title-label">Figure 4. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-26D2E6A2-3E8B-41D0-9D01-C52A7B2D2A8F-low.jpg" /></div>
</div>
</div>
<div class="section" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-C09C846C-1669-478C-878E-11F1A4A5219F"><h2 class="title sectiontitle">Generate Code</h2><p class="p"><a class="xref" href="GUID-9C28F407-4879-4174-9963-2CF34161398E.html">link</a> for instructions.</p>
<p class="p">PPS input/output remaping code can be find in this generated plib_gpio.c file.</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-754A32DF-FFE1-4096-BFB2-D14E0942E9B8"><div class="figcap"><span class="fig--title-label">Figure 5. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-27F3EA9B-6584-48B0-972A-69A30D03967F-low.jpg" /></div>
</div>
<p class="p">SERCOM0_PAD3(in)-&gt;RA9 Pin setting will set PPS_SCOM0P3R to 15 (binary value 1111)</p>
<p class="p">SERCOM0_PAD1(in)-&gt;RA8 Pin setting will set PPS_SCOM0P1R to 9 (binary value 1001)</p>
<p class="p">SERCOM0_PAD0(out)-&gt;RA7 Pin setting will set PPS_RPA7G2R to 1 (binary value 00001)</p>
<p class="p">SERCOM0_PAD2(out)-&gt;RA3 Pin setting will set PPS_RPA3G1R to 2 (binary value 00010)</p>
<p class="p">Create a "hello world" application as mentioned in <a class="xref" href="GUID-D79D28FC-6693-4FE3-B380-9F6983BCE151.html" title="Direct Mode is a mode in which peripherals are running based on function priority for pins and not using Peripheral Pin Selection(PPS).">USART with Direct Pin Enable</a> section.</p>
</div>
<div class="section" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-B2EF3505-0C94-4204-BC96-30F5B2B97D96"><h2 class="title sectiontitle">Testing</h2><p class="p">Connect the WBZ451 Curiosity board to PC, program the application example. User can verify the data coming from UART Tx pin :SERCOM0_PAD0(RA7 in this case) using a logic analyzer. User can also verify this application using one FTDI cable. Connect FTDI ground pin and FTDI RX pin to appropriate Tx pin on WBZ451 and verify the message on TeraTerm window.</p>
<p class="p">1) Verify using Logic analyzer.</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-E7525046-EDC5-4703-8108-AFE09B5C18EF"><div class="figcap"><span class="fig--title-label">Figure 6. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-87178680-A71E-468D-BD21-9E54A8C19DB8-low.jpg" /></div>
</div>
<p class="p">2) Terminal window</p>
<div class="p"><div class="fig fignone" id="GUID-D2666558-1C41-4DC4-AB25-856CE215F5C8__GUID-416DF182-340E-465D-99C1-6336C807C625"><div class="figcap"><span class="fig--title-label">Figure 7. </span>. </div><span class="desc figdesc"></span><img class="image" src="GUID-DD0FD928-E04C-41B0-8BFD-C642B2186C3B-low.jpg" /></div>
</div>
</div>
<p class="p"></p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-B9333775-2F34-4B60-9429-E1B1B7F505FD.html" title="Guidance on how to add analog/digital peripherals to your application">How-to: Adding Chip Peripherals</a></div>
</div>
</div></body>
</html>