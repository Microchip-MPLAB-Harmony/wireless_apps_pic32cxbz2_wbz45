<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Upgradable image .bin file generation" />
<meta name="DC.relation" scheme="URI" content="GUID-1DBEFA54-6B29-4BB3-8C75-9FD48DB81F3F.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Upgradable image .bin file generation</title>
<meta name="Microsoft.Help.Id" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1" />
<meta name="Microsoft.Help.TocParent" content="GUID-A5330D3A-9F51-4A26-B71D-8503A493DF9C-GUID-1DBEFA54-6B29-4BB3-8C75-9FD48DB81F3F" />
<meta name="Microsoft.Help.TocOrder" content="5" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="Software Development Reference A 09/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1">
<h1 class="title topictitle1" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-C6DEFE15-7B18-4F48-B469-712A811888CB" style="">Upgradable image .bin file generation</h1><div class="body"><p class="p">Referring to <a class="xref" href="GUID-70714605-ACB2-451F-87F0-66F97057949F.html">Project Properties Configuration for Current image</a>, "SignFirmware" and "OTA" bin generation MPLABX script is added into OTA project. "OTA" window in project properties is used for OTA DFU image generation.</p>
<ol class="ol" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-F0F661B1-CC5D-4C1E-9AAE-2DECA0432085"><li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-D640FA0C-3EA5-4D3B-8ABE-67E9CAB9D9BD"><span class="indent-level-default">1.</span>
                <p class="p">After making the new upgrdabe application keep the new upgradable image version
                    number not same as current running image version. The version number has to be
                    taken care in <u class="ph u"><a class="xref" href="GUID-2624FC46-FF08-4D14-9FA0-25B260F81754.html#GUID-2624FC46-FF08-4D14-9FA0-25B260F81754__GUID-C42A6EB4-C62C-4482-AE26-A6873004F404">DIS Service</a></u> in new firmware as well as "Firmware Rev" in
                    "SignFirmware" window. For example, new image Firmware Rev is chosen as 1.0.0.1
                    and same in DIS Firmware version in the project. </p>

                <ol class="ol" type="a" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__OL_O1K_LC2_25B">
                    <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-FA52640D-7974-486E-9826-FF39C588B8C9"><span class="indent-level-default">a.</span>Follow step 1 in <a class="xref" href="GUID-70714605-ACB2-451F-87F0-66F97057949F.html">Project Properties Configuration for Current image</a> to open "SignFirmware" properties
                        window.</li>

                    <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-8A9EE7A6-DFAF-469B-8AFB-2C8AA0E63C66"><span class="indent-level-default">b.</span>Change the "Firmware Rev" and then click on "Apply". <br /><img class="image" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__IMAGE_N2Z_3C2_25B" src="GUID-E73B709E-9B95-4D86-A9C0-98FF2442F330-low.png" /><br /></li>

                    <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-FBE0179B-0850-48F9-BB3B-1216755C88A5"><span class="indent-level-default">c.</span>
                        <p class="p">Compile the project.</p>

                    </li>

                </ol>

            </li>

            <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-1577926E-8263-49C7-850E-AF70215C0868"><span class="indent-level-default">2.</span>Follow step 1 in <a class="xref" href="GUID-70714605-ACB2-451F-87F0-66F97057949F.html">Project Properties Configuration for Current image</a> to open "OTA" properties window.<ol class="ol" type="a" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__OL_DMJ_XC2_25B">
                    <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-B55BA9DD-C51B-472E-83C8-4A4F9EEF61A0"><span class="indent-level-default">a.</span>"OTA" window has few configurations.<div class="p">
                            <div class="fig fignone" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-24003979-DB28-4534-B45E-546CD1D28423">
                                <br /><img class="image" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__IMAGE_HXX_PC2_25B" src="GUID-5ADB34F1-A7CE-455C-A9D8-1D83578203CF-low.png" /><br />
                            </div>

                        </div>
<ul class="ul" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__UL_IXX_PC2_25B">
                            <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-DF303E53-75A5-418A-A082-DE971C8FAE34">
                                <p class="p">Output File Name - Name of the image.</p>

                            </li>

                            <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-7182721D-167A-41E6-B65D-BB04EDCFB427">
                                <p class="p">Output File Encryption - Image is encrypted or plain image.</p>

                            </li>

                            <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-38D15E19-A867-4834-9771-20D548BE44F6">
                                <p class="p">Output File Type - Choose "BLE OTA File" type for BLE based
                                    OTAU.</p>

                            </li>

                            <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-A3C3ABA0-BA2D-42B5-B1D2-F5750CA8932D">
                                <p class="p">Flash Image ID - Refer to <a class="xref" href="GUID-2624FC46-FF08-4D14-9FA0-25B260F81754.html#GUID-2624FC46-FF08-4D14-9FA0-25B260F81754__GUID-850EBD93-8C59-43DA-91FF-DFB4C2DD2C6A">Enable Flash Image ID</a> for details.</p>

                            </li>

                        </ul>
</li>

                    <li class="li" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-741B3B2A-7330-4736-BC3B-F2E249987C6B"><span class="indent-level-default">b.</span>After the configurations, click on "Create OTA File". The Upgradable .bin
                        image with selected "Output File Name" will be created in .X folder. This is
                        the image stored in OTAU Manager to send to OTAU Target.<div class="fig fignone" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__GUID-E18446F5-C670-4116-AB2B-49283B8E4EC1">
                            <br /><img class="image" id="GUID-6816EA2C-EDCC-48EC-9D99-BF8EAF56C5A1__IMAGE_JXX_PC2_25B" src="GUID-2EA62DA4-35E5-4A4D-9E86-45307A15E02B-low.png" /><br />
                        </div>
</li>

                </ol>
</li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-1DBEFA54-6B29-4BB3-8C75-9FD48DB81F3F.html">BLE OTA DFU Implementation</a></div>
</div>
</div></body>
</html>